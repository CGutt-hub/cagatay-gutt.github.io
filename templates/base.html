<!DOCTYPE html>
<html lang="{{ lang | default(value='en') }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ config.title }}{% endblock title %}</title>
    <link rel="stylesheet" href="{{ get_url(path='style.css') }}">
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="{{ get_url(path='blog/atom.xml') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="header-content">
            <div class="header-left">
                <h1><a href="{{ get_url(path='/') }}">√áaƒüatay √ñzcan Jagiello Gutt</a></h1>
                <nav>
                    {% set current_lang = lang | default(value='en') %}
                    {% if current_lang == "de" %}
                    <a href="{{ get_url(path='/', lang='de') }}">startseite</a>
                    <a href="{{ get_url(path='cv/', lang='de') }}">lebenslauf</a>
                    <a href="{{ get_url(path='publications/', lang='de') }}">publikationen</a>
                    <a href="{{ get_url(path='projects/', lang='de') }}">projekte</a>
                    <div class="nav-dropdown">
                        <a href="#" class="dropdown-trigger">werkzeuge ‚ñæ</a>
                        <div class="dropdown-menu">
                            <a href="{{ get_url(path='paper-finder/') }}">Paper Finder</a>
                        </div>
                    </div>
                    <a href="{{ get_url(path='blog/', lang='de') }}">blog</a>
                    <a href="{{ get_url(path='contact/', lang='de') }}">kontakt</a>
                    {% else %}
                    <a href="{{ get_url(path='/') }}">home</a>
                    <a href="{{ get_url(path='cv/') }}">cv</a>
                    <a href="{{ get_url(path='publications/') }}">publications</a>
                    <a href="{{ get_url(path='projects/') }}">projects</a>
                    <div class="nav-dropdown">
                        <a href="#" class="dropdown-trigger">tools ‚ñæ</a>
                        <div class="dropdown-menu">
                            <a href="{{ get_url(path='paper-finder/') }}">Paper Finder</a>
                        </div>
                    </div>
                    <a href="{{ get_url(path='blog/') }}">blog</a>
                    <a href="{{ get_url(path='contact/') }}">contact</a>
                    {% endif %}
                </nav>
            </div>
            <div class="header-right">
                <div class="toggle-group">
                    <a href="{{ get_url(path='/') }}" class="lang-link {% if current_lang == 'en' %}active{% endif %}">EN</a>
                    <span class="toggle-separator">|</span>
                    <a href="{{ get_url(path='/', lang='de') }}" class="lang-link {% if current_lang == 'de' %}active{% endif %}">DE</a>
                </div>
                <button id="theme-toggle" class="theme-switch" aria-label="Toggle theme">
                    <span class="theme-icon">‚òÄÔ∏è</span>
                </button>
            </div>
        </div>
    </header>
    
    <main>
        {% block content %}{% endblock content %}
    </main>
    
    <footer>
        <div class="footer-content">
            <div class="footer-main">
                <p class="site-info">{% set current_lang = lang | default(value='en') %}{% if current_lang == 'de' %}Diese Seite synchronisiert automatisch mit GitHub (Projekte) und ORCID (Publikationen).{% else %}This site syncs automatically with GitHub (projects) and ORCID (publications).{% endif %}</p>
                <div class="contact-links">
                    <a href="https://www.linkedin.com/in/cagatay-gutt" target="_blank" rel="noopener">LinkedIn</a>
                    <span class="footer-sep">¬∑</span>
                    <a href="https://orcid.org/0000-0002-1774-532X" target="_blank" rel="noopener">ORCID</a>
                    <span class="footer-sep">¬∑</span>
                    <a href="https://github.com/CGutt-hub" target="_blank" rel="noopener">GitHub</a>
                    <span class="footer-sep">¬∑</span>
                    <a href="{{ get_url(path='blog/atom.xml') }}" target="_blank" rel="noopener">RSS</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; {{ now() | date(format="%Y") }} √áaƒüatay √ñzcan Jagiello Gutt</p>
                <p class="footer-tech">{% if current_lang == 'de' %}Erstellt mit{% else %}Built with{% endif %} <a href="https://www.getzola.org/" target="_blank" rel="noopener">Zola</a> ¬∑ {% if current_lang == 'de' %}Letzter Build{% else %}Last build{% endif %}: {{ now() | date(format="%Y-%m-%d") }}</p>
            </div>
        </div>
    </footer>
    
    <script>
        // Theme switching functionality
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.querySelector('.theme-icon');
        const html = document.documentElement;
        
        // Check for saved theme preference or default to 'dark'
        const savedTheme = localStorage.getItem('theme') || 'dark';
        html.setAttribute('data-theme', savedTheme);
        updateThemeIcon(savedTheme);
        
        themeToggle.addEventListener('click', () => {
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        });
        
        function updateThemeIcon(theme) {
            themeIcon.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        }

        // Dropdown menu functionality (mobile-friendly)
        const dropdowns = document.querySelectorAll('.nav-dropdown');
        
        dropdowns.forEach(dropdown => {
            const trigger = dropdown.querySelector('.dropdown-trigger');
            
            trigger.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                
                // Close other dropdowns
                dropdowns.forEach(other => {
                    if (other !== dropdown) {
                        other.classList.remove('active');
                    }
                });
                
                // Toggle current dropdown
                dropdown.classList.toggle('active');
            });
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.nav-dropdown')) {
                dropdowns.forEach(dropdown => {
                    dropdown.classList.remove('active');
                });
            }
        });
    </script>
</body>
</html>
